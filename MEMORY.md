# MEMORY.md - 核心记忆文件

## 用户身份信息

- **用户ID：** 7511690448（Telegram：@lao chen）
- **平台：** Telegram
- **称呼：** 老陈
- **位置：** 中国（根据服务器 IP 判断）
- **时区：** UTC+8（北京时间）

---

## 项目讨论：AI 客服机器人

### 项目方向
- **核心模式：** 基于 Dify 开源平台提供定制化服务
- **目标市场：** 国内中小企业、电商、教育机构、培训机构
- **商业模式：** 一键部署 + 企业定制 + 技术支持 + 月度运维

### 收入估算（保守）

#### 第 1 年（起步期）
| 收入来源 | 数量 | 单价 | 小计 |
|-----------|------|------|------|
| 企业定制开发 | 2 个 | ¥30,000 | ¥60,000 |
| 一键部署服务 | 12 次 | ¥800 | ¥9,600 |
| 知识库整理服务 | 8 次 | ¥5,000 | ¥40,000 |
| 技术支持服务 | 40 小时 | ¥400 | ¥16,000 |
| 运维收入（10 客户×12个月） | 10 个×¥2,000×12 | ¥240,000 |
| **第 1 年小计** | | | **¥365,600** |

#### 第 2 年（增长期）
| 收入来源 | 数量 | 单价 | 小计 |
|-----------|------|------|------|
| 企业定制开发 | 3 个 | ¥30,000 | ¥90,000 |
| 一键部署服务 | 20 次 | ¥800 | ¥16,000 |
| 知识库整理服务 | 12 次 | ¥5,000 | ¥60,000 |
| 技术支持服务 | 60 小时 | ¥400 | ¥24,000 |
| 运维收入（20 个客户×12个月） | 20 个×¥2,000×12 | ¥480,000 |
| **第 2 年小计** | | | **¥670,000** |

**两年总收入：约 104 万**

### 成本支出（年度）

| 项目 | 月度成本 | 年度成本 |
|------|----------|----------|
| 服务器（2C8G） | ¥300 | ¥3,600 |
| 千问 API 调用 | ¥500-1000 | ¥12,000 |
| 传播推广 | ¥1000 | ¥12,000 |
| 其他杂项 | ¥200 | ¥2,400 |
| **年度合计** | **¥2,000-3,000/月** | **¥30,000/年** |

### 净利润

| 年份 | 总收入 | 总成本 | 净利润 |
|------|--------|--------|-----------|
| 第 1 年 | ¥365,600 | ¥30,000 | **¥335,600** |
| 第 2 年 | ¥670,000 | ¥30,000 | **¥640,000** |

**两年净利润：约 97.5 万**

### 关键成功因素

1. **获客渠道：** 行业群/论坛、Dify 社区活跃、技术文章（知乎/掘金/公众号）
2. **竞争优势：** 本地化部署支持、中文沟通无障碍、响应速度快、定制化服务
3. **风险因素：** 竞争加剧、平台封号风险、客户流失（续费率可能 50-70%）

### 技术可行性

| 维度 | 评估 |
|------|------|
| 技术难度 | 🟢 低-中（1 周上线）|
| 市场需求 | 🟡 中（有需求但竞争激烈）|
| 收入潜力 | 🟡 中等（第 1 年 30-40 万，第 2 年 60-80 万）|
| 成功率 | 🟡 中-低（需要持续获客）|
| 投入产出比 | 🟢 低-中（需要大量销售和客户服务）|
| 持续性 | ✅ 高（SaaS 模式，续费收入）|

### 客观判断

**整体评估：** 技术可行性高，市场需求中等，收入潜力中等，成功率中低，投入产出比低-中，持续性高。

---

## 微信 & 抖音客服接入指南

**文档位置：** `/home/ubuntu/.openclaw/workspace/微信抖音客服接入指南.md`

### 微信客服接入

#### 账号类型对比
| 类型 | 适用场景 | 认证条件 | 费用 |
|------|---------|----------|------|
| 订阅号 | 个人博主/自媒体 | 身份证即可 | 免费 |
| 服务号 | 企业客服/商业 | 营业执照 | 免费 |
| 企业微信 | 公司内部/大规模客服 | 企业认证（¥300/年）| 收费 |

#### 企业微信（推荐中大型企业）
- **优势：** 无需域名备案、功能强大、支持群发、素材库、会话记录、可接 CRM
- **费用：** 企业认证 ¥300/年 + 按人数收费
- **限制：** 无主动推送限制
- **技术栈：** 企业微信 SDK 或 API + WebSocket 实时连接

#### 技术实现方案

**方案 A：服务器推送（推荐）**
```
架构：
├─ 公众号/企业微信 ←─→ 消息推送 ←→ 用户

流程：
1. 用户发送消息 → 微信服务器接收
2. 微信服务器回调到你的服务器
3. 你的服务器调用 LLM API 生成回复
4. 你的服务器通过接口推送回复给用户

技术栈：
- 后端：Python + FastAPI / Node.js + Express
- WebSocket：用于接收实时消息
- LLM：千问 API / 通义千问 API / OpenAI

优点：
✅ 数据完全掌控（本地数据库）
✅ 可扩展性强
✅ 成本可控

缺点：
⚠️ 需要维护服务器
⚠️ 需要处理并发和高可用
```

**方案 B：无服务器方案（SAAS）**
```
架构：
├─ 公众号/企业微信 ←─→ 第三方平台 ←→ LLM API ←→ 用户

第三方平台：
- 容联云
- 阿里云
- Dify（开源方案）

优点：
✅ 免运维
✅ 快速上线
✅ 高可用（第三方保证）

缺点：
❌ 数据存储在第三方
❌ 成本较高（平台抽成）
❌ 定制功能受限
```

### 抖音客服接入

#### 账号类型对比
| 类型 | 适用场景 | 认证条件 | 费用 |
|------|---------|----------|------|
| 个人号 | 个人博主 | 手机号+身份证 | 免费 |
| 企业号 | 公司业务 | 营业执照+对公账户 | 免费 |
| 蓝 V 认证 | 更高信任度 | 企业资质+费用 | 收费 |

**注意：** 个人号无法开通客服接口，必须用企业号或蓝 V 认证

#### 企业号（推荐）
- **优势：** 支持 AI 客服回复、支持文本/图片/视频回复、支持快捷短语设置
- **费用：** 开通免费、API 调用按次计费
- **限制：** 每日 API 调用次数有限制、内容审核严格

#### 技术实现方案

**方案 A：机器人 API（推荐）**
```
架构：
├─ 抖音用户 ←─→ 发送消息 ←→ 抖音服务器 ←→ Webhook ←→ 你的服务器 ←→ 调用 LLM API ←→ 回复 ←→ 你的服务器 ←→ 调用机器人 API ←→ 抖音服务器 ←→ 用户

流程：
1. 用户发送消息
2. 抖音服务器通过 Webhook 推送到你的服务器
3. 你的服务器调用 LLM API 生成回复
4. 你的服务器调用机器人 API 发送回复

关键 API：
- 发送消息：`bot.messages.send`
- 上传素材：`bot.images.create`
- 创建快捷短语：`bot.quick_reply.create`

技术栈：
- 后端：Python + FastAPI
- LLM：千问 API / 通义 API / OpenAI
- 抖音 SDK：pip install douyin-open-api
```

#### 内容审核
```
所有回复消息都会经过抖音审核
违规内容类型：
- 敏感词（政治、色情等）
- 虚假广告
- 欺诈信息
- 不合规的医疗建议

后果：
- 消息被拦截
- 账号被封禁
```

#### 消息发送限制
```
企业号限制：
- 每分钟发送数量：视等级而定
- 每天总发送数量：有上限
- 对同一用户：有频率限制

解决方案：
- 使用智能客服优先处理（AI 优先）
- 缓存高频问题答案
- 排队系统处理低优先级问题
```

#### 机器人权限
```
需要开通的权限：
- 发送消息权限
- 上传图片/视频权限
- 访问用户基本信息权限
- 创建快捷短语权限

注意：
- 机器人不能主动发起对话
- 只能在用户发送消息后 24 小时内回复
```

---

## GitHub 上找到的 API 余额监控工具

### 推荐项目（按推荐度排序）

#### 1. Accurate（最推荐）⭐⭐⭐⭐⭐⭐
- **项目地址：** https://github.com/carlosarraes/ccost
- **主要功能：**
  - 多平台支持：OpenAI、Anthropic (Claude)、Google (Gemini)、Cohere、千问
  - 实时余额显示：直接从各平台获取
  - 成本追踪：精确计算每笔 API 调用
  - 预算管理：设置月度预算，超支提醒
  - 可视化：图形化展示使用趋势
  - 使用统计：按日/周/月度统计
  - 多账号支持：不同项目的 API Key 分开管理
- **技术栈：** Python + FastAPI、前端 Next.js + Tailwind CSS、数据库 SQLite
- **部署难度：** 中等（需要配置各平台 API Key）
- **适合场景：** 开发者（多个 API Key）、小团队（共享预算）、个人用户（控制 AI 支出）
- **优势：** 开源、完全本地化、功能完整、支持国内模型（千问）

#### 2. evanlong-me/claude-code-usage ⭐⭐⭐⭐
- **项目地址：** https://github.com/evanlong-me/claude-code-usage
- **主要功能：**
  - CLI 工具：命令行界面
  - Claude Code 使用追踪：精确到 token
  - 成本分析：自动计算费用
  - 历史记录：保存使用历史
- **技术栈：** Python
- **部署难度：** 简单（直接安装）
- **适合场景：** 开发者使用终端、需要 Claude Code 使用统计、不喜欢 GUI 的用户

#### 3. mag123c/toktrack ⭐⭐⭐⭐
- **项目地址：** https://github.com/mag123c/toktrack
- **主要功能：**
  - 超快追踪：极轻量级
  - 多平台支持：Claude Code、Codex CLI、Gemini CLI
  - Token 消费：实时显示
  - 成本计算：根据官方定价表计算
  - 缓存机制：减少重复 API 调用
- **技术栈：** Python
- **部署难度：** 简单
- **适合场景：** 开发者（需要轻量级工具）、对速度要求高的用户

#### 4. rz1989s/claude-code-statusline ⭐⭐⭐
- **项目地址：** https://github.com/rz1989s/claude-code-statusline
- **主要功能：**
  - 终端状态行：在终端底部显示实时状态
  - Git 状态：显示当前分支
  - 上下文使用：Claude Code 上下文 token 使用
  - 模型信息：显示当前使用的模型
  - 成本追踪：实时费用显示
- **技术栈：** Shell 脚本
- **部署难度：** 简单（复制脚本到 shell 配置）
- **适合场景：** 终端重度用户、Vim/Neovim 用户、需要 Git 状态显示的开发者

#### 5. dvlshah/tokenx ⭐⭐
- **项目地址：** https://github.com/dvlshah/tokenx
- **主要功能：**
  - Python 装饰器：自动监控 API 成本
  - 多提供商：OpenAI、Anthropic、Google
  - 延迟监控：记录 API 响应时间
  - 缓存统计：避免重复调用
- **技术栈：** Python + asyncio
- **部署难度：** 中等（需要配置 Python 环境）
- **适合场景：** 需要延迟监控的用户、需要优化 API 调用的开发者

### 快速开始

**个人开发者：**
```bash
# 安装 toktrack（最快）
pip install git+https://github.com/mag123c/toktrack.git

# 或克隆 Accurate（最完整）
git clone https://github.com/carlosarraes/ccost.git
cd ccost
pip install -r requirements.txt
python main.py
```

**团队/公司：**
```bash
# 克隆 Accurate（最完整）
git clone https://github.com/carlosarraes/ccost.git
cd ccost
pip install -r requirements.txt
python main.py

# 部署到云服务器（推荐阿里云 2C8G）
nohup python main.py
```

---

## 系统状态

### 当前状态（最后更新：2026-02-05）

| 检查项 | 状态 | 详情 |
|---------|------|------|
| Gateway | ✅ 正常运行 | PID 1181330，端口 18789，RPC 正常 |
| 磁盘空间 | ✅ 正常 | 根分区使用 47%（14G/29G 可用）|
| 内存使用 | ✅ 正常 | 使用 12.5%（953Mi/7.6Gi），可用 6.7Gi |
| Git 仓库 | ✅ 已初始化 | master 分支，已提交 11 个文件 |
| memory 目录 | ✅ 已创建 | `/home/ubuntu/.openclaw/workspace/memory/` 目录存在 |

### 配置文件
- **主配置：** `/home/ubuntu/.openclaw/openclaw.json`
- **工作区：** `/home/ubuntu/.openclaw/workspace/`
- **技能目录：** `/home/ubuntu/.npm-global/share/node_modules/openclaw/skills/`

### 技术栈
- **操作系统：** Ubuntu (Linux)
- **Node.js：** v22.12.0
- **OpenClaw：** 2026.2.3-1 (d84eb46)
- **Python：** 系统自带
- **Docker：** 未安装
- **数据库：** OpenClaw 内置 (SQLite)

---

## 待办事项

### 近期任务（高优先级）

- [ ] 部署 Dify 测试环境（30 分钟完成）
- [ ] 添加支付系统（微信/支付宝）
- [ ] 创建演示账号供客户试用
- [ ] 编写营销文案和技术文档
- [ ] 寻找第一批客户（行业群、Dify 社区、技术文章）

### 中期任务（中优先级）

- [ ] 完成 GitHub 上找到的 API 余额监控工具的部署和测试
- [ ] 编写并发布技术文章（知乎/掘金）
- [ ] 在 Dify 社区建立影响力（帮助他人、回答问题）
- [ ] 设计标准化服务套餐（降低销售成本）

### 长期目标（低优先级）

- [ ] 建立品牌和网站
- [ ] 扩展到更多平台（WhatsApp、Discord、国际版）
- [ ] 开发行业专用模板（电商、教育、医疗）
- [ ] 组建小团队（1-2 名开发 + 1 名销售）

---

## 学习资源

### 官方文档
- **OpenClaw 文档：** https://docs.openclaw.ai/
- **Dify 文档：** https://docs.dify.ai/
- **微信开放平台：** https://developers.weixin.qq.com/doc
- **抖音开放平台：** https://developer.open-douyin.com/
- **千问 API：** https://help.aliyun.com/zh/dashun/

### 推荐学习
- **Dify 教程：** https://docs.dify.ai/（部署、使用、开发）
- **OpenClaw 技能栈：** https://github.com/topics/openclaw-skills
- **GitHub 话题：** api-usage、cost-tracking、llm

---

## 快速参考

### 关键文件路径
```
工作区：/home/ubuntu/.openclaw/workspace
主配置：~/.openclaw/openclaw.json
心跳清单：~/workspace/HEARTBEAT.md
日常记录：~/workspace/memory/（日期格式）
微信抖音指南：~/workspace/微信抖音客服接入指南.md
技能目录：~/.npm-global/share/node_modules/openclaw/skills/
```

### 关键命令
```bash
# Gateway 状态
openclaw gateway status

# 部署 Dify
cd /path/to/dify && docker compose up -d

# 查看日志
tail -f /tmp/openclaw/openclaw-2026-02-05.log

# Git 提交
cd /home/ubuntu/.openclaw/workspace
git add .
git commit -m "提交说明"

# 重启 Gateway
openclaw gateway restart
```

---

## 备注

- **最后更新：** 2026-02-05 17:59 UTC
- **更新人：** 旺财
- **更新内容：** 创建 MEMORY.md 核心记忆文件，整合所有项目信息、收入估算、接入指南、系统状态和待办事项
- **下次检查：** 按照 HEARTBEAT.md 清单执行

---

**注意：** 此文件会定期更新以记录项目进展和新决策。
